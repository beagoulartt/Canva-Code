library(httr)

headers = c(
  'Content-Type' = 'application/x-www-form-urlencoded'
)

# Define the body of the request with required parameters
body <- list(
  'grant_type' = 'authorization_code',
  'client_id' = 'OC-AZL89v-B4Rxg',
  'client_secret' = 'cnvcaZK-tjmp632o8ecNABv5t0qdY_3hH1GpeMgz6IpbPzyU7db24ec0',
  'code' = 'eyJraWQiOiJlODZiMTIwMy1iMWY1LTQ4N2MtYjBiOS0yN2U0MmI2ZjMzZDkiLCJhbGciOiJSUzI1NiJ9.eyJqdGkiOiJkbUthVENfTmNyZ3hBcEsxdGZBdXBRIiwiY2xpZW50X2lkIjoiT0MtQVpMODl2LUI0UnhnIiwiYXVkIjoiaHR0cHM6Ly93d3cuY2FudmEuY29tIiwiaWF0IjoxNzMwOTMyNzEwLCJuYmYiOjE3MzA5MzI3MTAsImV4cCI6MTczMDkzMzMxMCwiYnVuZGxlcyI6WyJBRkZJIiwiUEFJRCJdLCJ0aWVyIjoicGFpZCIsInJvbGVzIjoidnJMeG04ZGliNHpqR0dVcDVHeDFNbm9YVlYxdkJ3MVZRVFNCaG1tdWVNUUJqa3ZKQ293LV9meUNSTXRMTTdjWDF0WmxlQSIsImxvY2FsZSI6Ino2TDRoZ1pSRldUOUpnc1dOUnZ1MjBHdk1XcGE5N0JiTV96dnFNemlPRFdsa2pIVHZLRmxZZ0xkUmk1X1lGV0JEYkozTmciLCJzY29wZXMiOlsiYXBwOnJlYWQiLCJhcHA6d3JpdGUiLCJkZXNpZ246Y29udGVudDpyZWFkIiwiZGVzaWduOm1ldGE6cmVhZCIsImRlc2lnbjpjb250ZW50OndyaXRlIiwiZGVzaWduOnBlcm1pc3Npb246cmVhZCIsImRlc2lnbjpwZXJtaXNzaW9uOndyaXRlIiwiZm9sZGVyOnJlYWQiLCJmb2xkZXI6d3JpdGUiLCJmb2xkZXI6cGVybWlzc2lvbjpyZWFkIiwiZm9sZGVyOnBlcm1pc3Npb246d3JpdGUiLCJhc3NldDpyZWFkIiwiYXNzZXQ6d3JpdGUiLCJjb21tZW50OnJlYWQiLCJjb21tZW50OndyaXRlIiwiYnJhbmR0ZW1wbGF0ZTptZXRhOnJlYWQiLCJicmFuZHRlbXBsYXRlOmNvbnRlbnQ6cmVhZCIsInByb2ZpbGU6cmVhZCJdLCJzdWIiOiJvVVZ3bnFUTjRETmtkMGgyQkNUZDZFIiwiYnJhbmQiOiJvQlZ3bjJZazZneGFYSl9jdHh5QWg0Iiwib3JnYW5pemF0aW9uIjpudWxsLCJwa2NlIjoiT0o5NWF3c3lrb2FkSE9NZlJvemNtQ1VDdEYwYzVKcGVBbjgwaS1TN3MzaDBNbHAxdTdZMmxwSGVPOUJOLWVMUEJJUDl2M1BVdkctR2l2OEVZckwyT2d2Rlp0ajYyNHdjRVp4V25TVnVWc0k5cFVnYiJ9.vGSY4a-Fif3r6RR3GeIvHDBgnJMVle9MOa_vXe-k8m7Jprf-e2WejMuueqbdqy3H0Pcgbhm3lwzJtabQX_eCF_fm7SWTbTZKvaEWnBVOLhjKq1OY7UfmY2DYVSigWfBl732mbkb5kEU3vgNKvGmt5rRJb9R7wiIp90k5BX1XtX0beGNkloFBLYVJ9fQleIieatTtbv7JLeuOHv2P7YAExEX-o5JQLn9oJjll-n_LHFPh7ci_Y0RtoAw-4aTntqzryWWo_WhjdbfB4BnSaWwh6UyT-lanIq-J2-7irBZ0bhJNoOtl0cT7SxbOKiJL5pCx2X5XiatJ4CdnwH5C1iE0KA',
  'code_verifier' = '3SAKOp-fkRhpkXiyZWapvnQukUkDR-gJ3vGW3XA2oMo'
)

res <- VERB("POST", url = "https://api.canva.com/rest/v1/oauth/token", body = body, add_headers(headers), encode = 'form')

cat(content(res, 'text')) 